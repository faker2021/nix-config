#!/bin/sh
# Put this file into your home directory
lightdm_conf="/etc/lightdm/lightdm.conf" # I'm using lightdm, YMMV.
session_name="none+awesome" # Your default session name.
session_wrapper="$(awk '/^session-wrapper/ { print $3 }' "$lightdm_conf")"

awk '/^sessions-directory/ { sub(":", "\n", $3); print $3 }' "$lightdm_conf" | while read session_dir; do
  session_path="$session_dir/$session_name.desktop"
  if [ ! -e "$session_path" ]; then
    continue
  fi
  session="$(awk -F= '/^Exec/ { print $2 }' "$session_path")"

  eval exec "$session_wrapper" "$session"
done
